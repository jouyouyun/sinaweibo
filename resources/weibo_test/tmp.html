<html>
    <head>
        <meta http-equiv="Access-Control-Allow-Origin" content="*" charset="utf-8" />
        <title>Test XMLHttpRequest</title>
    </head>
    <body>
        <p>Test XMLHttpRequest POST</p>

        <script type="text/javascript">
            res = {"access_token":"2.00VkxpGCR96raC7fa0d660e00_J7zC","remind_in":"157679999","expires_in":157679999,"uid":"1933308087"};

            alert(res.access_token);

            var xhr = new XMLHttpRequest();
            var code = "90fd2707abe9ba9db96123d233c06e5a";
            var url = "https://api.weibo.com/oauth2/access_token";
            var params = "client_id=2376942997&client_secret=33a1e119d4ffe60359c24ad97c17363e&grant_type=authorization_code&code="+code+"&redirect_uri=http://127.0.0.1:8000/";

            alert("Starting POST Request");
            document.writeln(url);
            document.writeln(params);
            xhr.onreadystatechange = function() {
                if ( xhr.readyState == 4 && xhr.status == 200 ) {
                    response = xhr.responseText;
                    alert(response);
                }
            }
            
            xhr.open("POST", url, true);
            xhr.send(params);
        </script>
    </body>
</html>
